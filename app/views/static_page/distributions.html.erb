<div class="row wrapper border-bottom white-bg page-heading">
  <div class="col-lg-10">
    <h2>Player Medal Distribution</h2>
    <ol class="breadcrumb">
      <li>
        <%= link_to 'Home', root_path %>
      </li>
      <li class="active">
        <strong>Distributions</strong>
      </li>
    </ol>
  </div>
  <div class="col-lg-2"></div>
</div>

<div class="wrapper wrapper-content">
  <div class="row animated fadeInRight">
    <div class="col-md-12">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h5>Medal Tier Distribution</h5>
        </div>
        <div class="ibox-content">
          <div id="medal_graph"></div>
        </div>
        <div class="ibox-footer">
          <p>Graph showing the Medal Tier distribution of registered players. This does not take into account players
            who have not calibrated or staff members who might be highly ranked but are not participating in the
            league games. We update medal tiers on an hourly basis.</p>
        </div>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
    $(function() {
        c3.generate({
            bindto: '#medal_graph',
            data: {
                x: 'x',
                columns: [
                    ['x'
                        <% @rank_hash.each do |k,v| %>
                        ,'<%= v['name'] %>'
                        <% end %>
                    ],
                    ['Players'
                        <% @rank_hash.each do |k,v| %>
                        ,'<%= v['count'] %>'
                        <% end %>
                    ]
                ],
                type: 'bar'
            },
            axis: {
                x: {
                    type: 'category',
                    tick: {
                        multiline: false,
                        rotate: 75,
                        culling: false
                    },
                    height: 70
                },
                y: {
                    tick: {
                        format: d3.format('d')
                    }
                }
            }
        });
    });

</script>